@inject Dashboard.Services.AppState AppState
@using Dashboard.Services

<MudNavMenu Class="nav-menu">
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Rounded.SpaceDashboard" Class="nav-item">
        Dashboard
    </MudNavLink>
    <MudNavLink Href="streams" Icon="@GetStreamsIcon()" Class="nav-item">
        @GetStreamsLabel()
    </MudNavLink>
    @if (AppState.CurrentMode == AppMode.Divergence)
    {
        <MudNavLink Href="divergence" Icon="@Icons.Material.Rounded.CompareArrows" Class="nav-item divergence-item">
            Divergence
        </MudNavLink>
    }
    <MudNavLink Href="analytics" Icon="@Icons.Material.Rounded.Insights" Class="nav-item">
        Analytics
    </MudNavLink>
    <MudNavLink Href="projections" Icon="@Icons.Material.Rounded.Timeline" Class="nav-item">
        Projections
    </MudNavLink>
    <MudNavLink Href="risk-analysis" Icon="@Icons.Material.Rounded.Casino" Class="nav-item">
        Risk Analysis
    </MudNavLink>
    <MudNavLink Href="connections" Icon="@Icons.Material.Rounded.Hub" Class="nav-item">
        Connections
    </MudNavLink>
    <MudNavLink Href="activity" Icon="@Icons.Material.Rounded.History" Class="nav-item">
        Activity
    </MudNavLink>
    <MudNavLink Href="settings" Icon="@Icons.Material.Rounded.Settings" Class="nav-item">
        Settings
    </MudNavLink>
</MudNavMenu>

<style>
    .nav-menu {
        padding: 8px;
    }

    .nav-item {
        border-radius: 10px !important;
        margin-bottom: 4px;
        transition: all 0.2s ease !important;
    }

    .nav-item:hover {
        background: var(--mud-palette-action-default-hover) !important;
        transform: translateX(4px);
    }

    .nav-item.active {
        background: linear-gradient(135deg, var(--mud-palette-primary) 0%, var(--mud-palette-primary-darken) 100%) !important;
        color: white !important;
    }

    .nav-item.active .mud-nav-link-icon {
        color: white !important;
    }

    :deep(.mud-nav-link) {
        padding: 12px 16px !important;
        font-weight: 500;
        font-size: 0.875rem;
    }

    :deep(.mud-nav-link-icon) {
        margin-right: 12px;
    }

    .divergence-item {
        background: rgba(139, 92, 246, 0.1) !important;
        border: 1px solid rgba(139, 92, 246, 0.2);
    }

    .divergence-item:hover {
        background: rgba(139, 92, 246, 0.2) !important;
    }
</style>

@code {
    private string GetStreamsIcon() => AppState.CurrentMode switch
    {
        AppMode.Outcome => Icons.Material.Rounded.Receipt,
        AppMode.Divergence => Icons.Material.Rounded.SwapHoriz,
        _ => Icons.Material.Rounded.AccountBalanceWallet
    };

    private string GetStreamsLabel() => AppState.CurrentMode switch
    {
        AppMode.Outcome => "Expenses",
        AppMode.Divergence => "All Streams",
        _ => "Streams"
    };
}
