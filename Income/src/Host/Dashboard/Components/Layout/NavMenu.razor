@inject NavigationManager NavigationManager
@implements IDisposable

<MudNavMenu Class="@($"nav-menu {(IsMini ? "nav-menu-mini" : "")}")">
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Rounded.SpaceDashboard" Class="nav-item">
        @if (!IsMini) { <span>Dashboard</span> }
    </MudNavLink>
    <MudNavLink Href="streams" Icon="@Icons.Material.Rounded.AccountBalanceWallet" Class="nav-item">
        @if (!IsMini) { <span>Streams</span> }
    </MudNavLink>
    <MudNavLink Href="analytics" Icon="@Icons.Material.Rounded.Insights" Class="nav-item">
        @if (!IsMini) { <span>Analytics</span> }
    </MudNavLink>
    <MudNavLink Href="projections" Icon="@Icons.Material.Rounded.Timeline" Class="nav-item">
        @if (!IsMini) { <span>Projections</span> }
    </MudNavLink>
    <MudNavLink Href="connections" Icon="@Icons.Material.Rounded.Hub" Class="nav-item">
        @if (!IsMini) { <span>Connections</span> }
    </MudNavLink>
</MudNavMenu>

@code {
    [Parameter]
    public EventCallback OnNavigation { get; set; }

    [Parameter]
    public bool IsMini { get; set; }

    protected override void OnInitialized()
    {
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        OnNavigation.InvokeAsync();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }
}

<style>
    .nav-menu {
        padding: 8px;
        transition: all 0.2s ease;
    }

    .nav-menu-mini {
        padding: 8px 4px;
    }

    .nav-item {
        border-radius: 10px !important;
        margin-bottom: 4px;
        transition: all 0.2s ease !important;
    }

    .nav-item:hover {
        background: var(--mud-palette-action-default-hover) !important;
    }

    .nav-menu:not(.nav-menu-mini) .nav-item:hover {
        transform: translateX(4px);
    }

    .nav-item.active {
        background: linear-gradient(135deg, var(--mud-palette-primary) 0%, var(--mud-palette-primary-darken) 100%) !important;
        color: white !important;
    }

    .nav-item.active .mud-nav-link-icon {
        color: white !important;
    }

    :deep(.mud-nav-link) {
        padding: 12px 16px !important;
        font-weight: 500;
        font-size: 0.875rem;
    }

    .nav-menu-mini :deep(.mud-nav-link) {
        padding: 12px 8px !important;
        justify-content: center;
    }

    :deep(.mud-nav-link-icon) {
        margin-right: 12px;
    }

    .nav-menu-mini :deep(.mud-nav-link-icon) {
        margin-right: 0;
    }
</style>
